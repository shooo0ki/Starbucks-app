# 画面要件定義 v1: レシピ詳細（M1-02 / M1-03）

**作成日**: 2026-02-22

---

## 1. 機能要件

### M1-02: レシピ詳細（基本）

| # | 機能 | 説明 |
|---|------|------|
| F01 | ドリンク基本情報表示 | ドリンク名・略称コード・カテゴリバッジ・スリーブアイコンをヘッダーに表示する |
| F02 | ステップカードリスト | 手順を番号付きカードで縦並び表示する。任意ステップは「(任意)」バッジ付きで薄いデザイン |
| F03 | 材料テーブル表示 | 各ステップの材料をS/T/G/Vの4列テーブルで表示する |
| F04 | 特記事項強調表示 | スリーブ必要・スチーム秒数等の特記事項を⚠️アイコン付きで強調表示する |
| F05 | カスタムトグル | 画面上部のトグルで「基本レシピ」↔「カスタムあり」（M1-03）を切替える |
| F06 | 編集・削除ボタン | recipe_type = 'user' の場合のみ「編集」「削除」ボタンを表示する |
| F07 | 習得ステータス更新 | 初回閲覧時にUSER_PROGRESSを「未学習→学習中」に更新する |

### M1-03: レシピ詳細（カスタムあり）

| # | 機能 | 説明 |
|---|------|------|
| F08 | カスタム選択パネル | ミルク変更・シロップ追加・ショット変更等のセレクター群を表示する |
| F09 | 変更ハイライト | カスタム選択によって変化する手順ステップを黄色ハイライトで強調する |
| F10 | 追加ステップ表示 | カスタムにより追加される手順を別色カードで表示する |

## 2. 非機能要件

| # | 項目 | 要件 |
|---|------|------|
| NF01 | 画面遷移速度 | 一覧→詳細の遷移を300ms以内に完了すること |
| NF02 | カスタム切替速度 | カスタム選択変更からハイライト更新を100ms以内に反映すること |

## 3. 表示条件・バリデーション

| 条件 | 表示内容 |
|------|---------|
| スリーブ = false の場合 | スリーブアイコンを非表示 |
| 任意ステップ（required = false）の場合 | 「(任意)」バッジを付け、透明度50%のカードデザインで表示 |
| カスタム選択が「通常」のままの場合 | ハイライトなしで基本レシピと同じ表示 |
| ユーザー作成レシピのメモが空の場合 | メモセクション自体を非表示にする |

## 4. エラーケース

| エラー | 対応 |
|--------|------|
| レシピ詳細データ取得失敗 | 「レシピの詳細を読み込めませんでした」表示＋戻るボタン |
| 削除確認後に削除失敗 | 「削除に失敗しました」トースト通知＋一覧に戻らない |
